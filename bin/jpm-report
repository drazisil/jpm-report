#!/usr/bin/env node

var jpmReport = require('../src/index.js')

jpmReport.checkArgs(process.argv, function cbParseArgs (err, res) {
  if (err) {
    console.log(err)
    process.exit(1)
  } else {
    var args = res
    jpmReport.parseReport(args[0], function cbParseReport (err, res) {
      if (err) {
        throw err
      } else {
        jpmReport.outputJUnit2File(res, args[1], function cbOutputJUnitFile (exitCode) {
          process.exit(exitCode)
        })
      }
    })
  }
})
